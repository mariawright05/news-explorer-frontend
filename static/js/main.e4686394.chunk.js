(this["webpackJsonpnews-explorer-frontend"]=this["webpackJsonpnews-explorer-frontend"]||[]).push([[0],[,,,,,,,,function(e){e.exports=JSON.parse('{"b":100,"d":3,"e":"https://newsapi.org/v2/everything","c":"https://api-news-explorer-mmw.herokuapp.com/api","a":"dbaf11a9636d4ec9a2d182bc8569034c"}')},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,,function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a,n=r(1),s=r.n(n),c=r(25),o=r.n(c),i=r(12),l=r(4),u=(r(32),r(5)),d=Object(n.createContext)(),p=(r(33),r(18)),j=r(2),b=function(e,t){var r=Object(n.useState)({}),a=Object(u.a)(r,2),s=a[0],c=a[1],o=Object(n.useState)({}),i=Object(u.a)(o,2),l=i[0],d=i[1],b=Object(n.useState)(!1),h=Object(u.a)(b,2),m=h[0],O=h[1];Object(n.useEffect)((function(){0===Object.keys(l).length&&m&&(e(),O(!1))}),[l]);return{onSubmit:function(e){e.preventDefault(),d(t(s)),O(!0)},onChange:function(e){c(Object(j.a)(Object(j.a)({},s),{},Object(p.a)({},e.target.name,e.target.value))),d(t(s))},values:s,errors:l}},h=function(e){var t={};return e.email?/\S+@\S+\.\S+/.test(e.email)||(t.email="Enter a valid email address"):t.email="Email address is required",e.password?e.password.length<5&&(t.password="Password needs to be at least 6 characters"):t.password="Password is required",t},m=r(0),O=function(){var e=Object(n.useContext)(d),t=e.handleLogin,r=e.isLoginOpen,a=e.handleRegisterOpen,s=e.closeAllPopups,c=e.errorMsg,o=b((function(){return t(i)}),h),i=o.values,l=o.onChange,u=o.onSubmit,p=o.errors;return Object(m.jsx)("div",{className:"loginPopup ".concat(r?"loginPopup_opened":""),children:Object(m.jsxs)("div",{className:"loginPopup__container",children:[Object(m.jsx)("button",{type:"button",className:"loginPopup__close-button","aria-label":"close loginPopup",onClick:s}),Object(m.jsxs)("form",{action:"submit",onSubmit:u,className:"loginPopup__form",noValidate:!0,children:[Object(m.jsx)("h3",{className:"loginPopup__heading",children:"Sign in"}),Object(m.jsxs)("fieldset",{className:"loginPopup__form-group",children:[Object(m.jsxs)("div",{className:"loginPopup__field-group",children:["Email",Object(m.jsxs)("label",{htmlFor:"email",className:"loginPopup__form-label",children:[Object(m.jsx)("input",{id:"email",type:"email",name:"email",className:"loginPopup__form-field ".concat(p.email&&"loginPopup__error"),label:"Email",placeholder:"Enter email",value:i.email||"",required:!0,onChange:l}),p.email&&Object(m.jsx)("p",{className:"loginPopup__error_visible",children:p.email})]})]}),Object(m.jsx)("div",{className:"loginPopup__field-group",children:Object(m.jsxs)("label",{htmlFor:"password",className:"loginPopup__form-label",children:["Password",Object(m.jsx)("input",{id:"password",type:"password",name:"password",className:"loginPopup__form-field ".concat(p.password&&"loginPopup__error"),placeholder:"Enter password",value:i.password||"",required:!0,onChange:l}),p.password&&Object(m.jsx)("p",{className:"loginPopup__error_visible",children:p.password})]})})]}),c&&Object(m.jsx)("p",{className:"loginPopup__errorMsg_visible",children:c}),Object(m.jsx)("input",{type:"submit",disabled:0!==Object.keys(p).length,className:"loginPopup__button",value:"Sign in"}),Object(m.jsxs)("button",{type:"button",className:"loginPopup__message_link",onClick:function(){s(),a()},children:[Object(m.jsx)("span",{className:"loginPopup__message",children:"or "}),"Sign up"]})]})]})})},f=(r(35),function(e){var t={};return e.email?/\S+@\S+\.\S+/.test(e.email)||(t.email="Enter a valid email address"):t.email="Email address is required",e.password?e.password.length<5&&(t.password="Password needs to be at least 6 characters"):t.password="Password is required",e.name?e.name.length<2&&(t.name="name needs to be at least 3 characters"):t.name="name is required",t}),_=function(){var e=Object(n.useContext)(d),t=e.handleRegister,r=e.user,a=e.isAuth,s=e.errorMsg,c=e.isRegisterOpen,o=e.handleLoginOpen,i=e.handleSuccessOpen,l=e.closeAllPopups,u=b((function(){return t(p)}),f),p=u.values,j=u.onChange,h=u.onSubmit,O=u.errors;return Object(n.useEffect)((function(){r&&a&&(l(),i())}),[]),Object(m.jsx)("div",{className:"registerPopup ".concat(c?"registerPopup_opened":""),children:Object(m.jsxs)("div",{className:"registerPopup__container",children:[Object(m.jsx)("button",{type:"button",className:"registerPopup__close-button","aria-label":"close registerPopup",onClick:l}),Object(m.jsxs)("form",{action:"submit",onSubmit:h,className:"registerPopup__form",children:[Object(m.jsx)("h3",{className:"registerPopup__heading",children:"Sign up"}),Object(m.jsxs)("fieldset",{className:"registerPopup__form-group",children:[Object(m.jsxs)("div",{className:"registerPopup__field-group",children:["Email",Object(m.jsxs)("label",{htmlFor:"email",className:"registerPopup__form-label",children:[Object(m.jsx)("input",{id:"email",type:"email",name:"email",className:"registerPopup__form-field ".concat(O.email&&"registerPopup__error"),label:"Email",placeholder:"Enter email",value:p.email||"",required:!0,onChange:j}),O.email&&Object(m.jsx)("p",{className:"registerPopup__error_visible",children:O.email})]})]}),Object(m.jsxs)("div",{className:"registerPopup__field-group",children:["Password",Object(m.jsxs)("label",{htmlFor:"password",className:"registerPopup__form-label",children:[Object(m.jsx)("input",{id:"password",type:"password",name:"password",className:"registerPopup__form-field ".concat(O.password&&"registerPopup__error"),placeholder:"Enter password",value:p.password||"",required:!0,onChange:j}),O.password&&Object(m.jsx)("p",{className:"registerPopup__error_visible",children:O.password})]})]}),Object(m.jsxs)("div",{className:"registerPopup__field-group",children:["Name",Object(m.jsxs)("label",{htmlFor:"name",className:"registerPopup__form-label",children:[Object(m.jsx)("input",{id:"name",type:"text",name:"name",className:"registerPopup__form-field ".concat(O.name&&"registerPopup__error"),placeholder:"Enter your name",value:p.name||"",required:!0,onChange:j}),O.name&&Object(m.jsx)("p",{className:"registerPopup__error_visible",children:O.name})]})]})]}),s&&Object(m.jsx)("p",{className:"registerPopup__errorMsg_visible",children:s}),Object(m.jsx)("input",{type:"submit",disabled:0!==Object.keys(O).length,className:"registerPopup__button",value:"Sign up",onClick:h}),Object(m.jsxs)("button",{type:"button",className:"registerPopup__message_link",onClick:function(){l(),o()},children:[Object(m.jsx)("span",{className:"registerPopup__message",children:"or "}),"Sign in"]})]})]})})},g=(r(36),function(){var e=Object(n.useContext)(d),t=e.isSuccessOpen,r=e.handleLoginOpen,a=e.closeAllPopups;return Object(m.jsx)("div",{className:"successPopup ".concat(t?"successPopup_opened":""),children:Object(m.jsxs)("div",{className:"successPopup__container",children:[Object(m.jsx)("button",{type:"button",className:"successPopup__close-button","aria-label":"close successPopup",onClick:a}),Object(m.jsxs)("div",{className:"successPopup__form",children:[Object(m.jsx)("h3",{className:"successPopup__heading",children:"Registration successfully completed!"}),Object(m.jsx)("button",{type:"button",className:"successPopup__message_link left-justified",onClick:function(){a(),r()},children:"Sign in"})]})]})})}),v=Object(n.createContext)({page:""});r(37);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function w(e,t){var r=e.title,s=e.titleId,c=y(e,["title","titleId"]);return n.createElement("svg",x({width:24,height:24,fill:"none",ref:t,"aria-labelledby":s},c),r?n.createElement("title",{id:s},r):null,a||(a=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 6H6v12h4v2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h4v2zm7.59 7l-4.3 4.13 1.42 1.37 6.7-6.46-6.7-6.46-1.42 1.36 4.3 4.13H8V13h9.59z",fill:"#fff"})))}var N,S=n.forwardRef(w);r.p;function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},s=Object.keys(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function E(e,t){var r=e.title,a=e.titleId,s=P(e,["title","titleId"]);return n.createElement("svg",k({width:24,height:24,fill:"none",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,N||(N=n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 6H6v12h4v2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h4v2zm7.59 7l-4.3 4.13 1.42 1.37 6.7-6.46-6.7-6.46-1.42 1.36 4.3 4.13H8V13h9.59z",fill:"#1A1B22"})))}var C=n.forwardRef(E),I=(r.p,function(){var e=Object(n.useContext)(v),t=Object(n.useContext)(d),r=t.user,a=t.handleLoginOpen,s=t.isLoginOpen,c=t.isRegisterOpen,o=t.isSuccessOpen,l=t.isAuth,p=t.handleLogout,j=t.handleLoadUser,b=Object(n.useState)(!1),h=Object(u.a)(b,2),f=h[0],x=h[1],y=function(){return"saved-news"!==e||f?"":"header__color_alt"},w=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{className:"header__nav-link-container ".concat(y()),children:Object(m.jsx)(i.c,{to:"/",className:"header__nav-link ".concat(y()),exact:!0,activeClassName:"header__nav-link_active",children:"Home"})}),Object(m.jsx)("li",{className:"header__nav-link-container ".concat(y()),children:Object(m.jsx)(i.c,{to:"/saved-news",className:"header__nav-link ".concat(y()),activeClassName:"header__nav-link_alt_active",children:"Saved articles"})}),Object(m.jsxs)("button",{type:"button",className:"header__nav-button ".concat(y()),onClick:p,children:[r.name,"saved-news"!==e||f?Object(m.jsx)(S,{className:"header__icon_logout"}):Object(m.jsx)(C,{className:"header__icon_logout"})]})]}),N=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{className:"header__nav-link-container",children:Object(m.jsx)(i.c,{to:"/",className:"header__nav-link ".concat(y()),activeClassName:"header__nav-link_active",children:"Home"})}),Object(m.jsx)("button",{type:"button",className:"header__nav-button signin ".concat(y()),onClick:a,children:"Sign in"}),s&&Object(m.jsx)(O,{}),c&&Object(m.jsx)(_,{}),o&&Object(m.jsx)(g,{})]}),k=Object(n.useState)(N),P=Object(u.a)(k,2),E=P[0],I=P[1];Object(n.useEffect)((function(){I(l?w:N)}),[l,c,s,o,f]);var L=localStorage.getItem("jwt");return Object(n.useEffect)((function(){L&&j()}),[]),Object(m.jsxs)("div",{className:"header",children:[Object(m.jsxs)("div",{className:"header__contents",children:[Object(m.jsx)("h1",{className:"header__title ".concat("saved-news"===e?"header__color_alt":""),children:"NewsExplorer"}),Object(m.jsx)("ul",{className:"header__nav-container",children:E}),Object(m.jsx)("button",{type:"button",className:"header__sidebar-button \n            ".concat(f?"saved-news"===e?"header__sidebar_closed-alt":"header__sidebar_closed":"saved-news"===e?"header__sidebar_open-alt":"header__sidebar_open"),"aria-label":"open or close sidebar",onClick:function(){x(!f)}})]}),Object(m.jsx)("div",{className:"header__sidebar ".concat(f?"header__sidebar_opened":""),children:Object(m.jsx)("ul",{className:"header__sidebar-container",children:E})})]})}),L=Object(n.createContext)(),A=function(e){var t={};return e.query||(t.query="Please enter a topic"),t},R=(r(45),function(){var e=Object(n.useContext)(L),t=e.handleSearchNews,r=e.setQuery,a=Object(n.useContext)(d).isAuth,s=b((function(){t(c.query),r(c.query)}),A),c=s.values,o=s.onChange,i=s.onSubmit,l=s.errors,u=localStorage.getItem("searchTerm");return Object(n.useEffect)((function(){c.query=u&&a?u:""}),[a]),Object(m.jsxs)("div",{className:"search",children:[Object(m.jsx)(I,{}),Object(m.jsxs)("div",{className:"search__container",children:[Object(m.jsx)("h2",{className:"search__title",children:"What's going on in the world?"}),Object(m.jsx)("p",{className:"search__subtitle",children:"Find the latest news on any topic and save them in your personal account."}),Object(m.jsxs)("form",{className:"search__input-wrapper",onSubmit:i,children:[Object(m.jsx)("input",{type:"text",name:"query",className:"search__input",placeholder:"Enter topic",value:c.query||"",onChange:o}),l.query&&Object(m.jsx)("p",{className:"search__error",children:l.query}),Object(m.jsx)("input",{type:"submit",value:"Search",className:"search__button"})]})]})]})}),T=(r(46),r(47),function(){return Object(m.jsxs)("div",{className:"preloader",children:[Object(m.jsx)("i",{className:"preloader__circle"}),Object(m.jsx)("p",{className:"preloader__text",children:"Searching for news..."})]})}),q=(r(48),function(){var e=Object(n.useContext)(L).searchError;return Object(m.jsxs)("section",{className:"nothingFound",children:[Object(m.jsx)("i",{className:"nothingFound__circle"}),Object(m.jsx)("p",{className:"nothingFound__title",children:e?"Server Error":"Nothing found"}),Object(m.jsx)("p",{className:"nothingFound__text",children:e?"Sorry, something went wrong during the request. There may be a connection issue or the server may be down. Please try again later.":"Sorry, but nothing matched your search terms."})]})}),F=function(){var e=Object(n.useContext)(L),t=Object(n.useContext)(v),r=e.loading,a=e.cards,s=e.searchError,c=e.notFound,o=e.searchedList,i=e.savedList,l=e.savedCards;return r?Object(m.jsx)(T,{}):c||s?Object(m.jsx)(q,{}):Object(m.jsx)("div",{className:0!==a.length&&"home"===t||0!==l.length&&"saved-news"===t?"cardList":"cardList_hidden",children:Object(m.jsx)("div",{className:"cardList__section-wrapper",children:"home"===t?o:i})})},D=(r(49),r.p+"static/media/maria-wright.ae02857e.png"),M=function(){return Object(m.jsxs)("div",{className:"author",children:[Object(m.jsx)("div",{className:"author__image-container",children:Object(m.jsx)("img",{className:"author__image",src:D,alt:"Maria Wright"})}),Object(m.jsxs)("div",{className:"author__text-container",children:[Object(m.jsx)("h2",{className:"author__title",children:"About the author"}),Object(m.jsx)("p",{className:"author__body",children:"I have been creating websites for clients for many years, but found myself loving the technical parts of web development more than the design."}),Object(m.jsx)("p",{className:"author__body",children:"After completing Practicum's Web Developer program, I am excited about bringing my new skills to clients."})]})]})},U=function(){var e=Object(n.useContext)(d).handleLoadUser,t=localStorage.getItem("jwt");return Object(n.useEffect)((function(){t?e():(localStorage.removeItem("searchTerm"),localStorage.removeItem("searchedNews"))}),[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(v.Provider,{value:"home",children:[Object(m.jsx)(R,{}),Object(m.jsx)(F,{}),Object(m.jsx)(M,{})]})})},H=(r(50),r(27)),J=(r(51),function(){var e,t=Object(n.useContext)(L).savedCards,r=Object(n.useContext)(d).user,a=t.map((function(e){return e.keyword})).filter((function(e){return void 0!==e})),s=function(e){var t=e.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{});return Object.entries(t).sort((function(e,t){return t[1]-e[1]})).flatMap((function(e){return Array(e[1]).fill(e[0])}))}(a),c=Object(H.a)(new Set(s)),o=c.join(", "),i="".concat(c.slice(0,2).join(", "),", and ").concat(c.length-2," more");return Object(m.jsx)("div",{className:"userInfo",children:Object(m.jsxs)("div",{className:"userInfo__container",children:[Object(m.jsx)("h1",{className:"userInfo__title",children:"Saved articles"}),Object(m.jsx)("p",{className:"userInfo__stats",children:1===a.length?"".concat(r.name,", you have 1 saved article"):"".concat(r.name,", you have ").concat(a.length," saved articles")}),Object(m.jsxs)("p",{className:"userInfo__keywords",children:["By keywords:",Object(m.jsxs)("span",{className:"userInfo__keywords_strong",children:["\xa0",(e=c,e.length<4?o:i)]})]})]})})}),V=function(){var e=Object(n.useContext)(L).handleSavedCards,t=localStorage.getItem("jwt");return Object(n.useEffect)((function(){t&&e(t)}),[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(v.Provider,{value:"saved-news",children:[Object(m.jsx)(I,{}),Object(m.jsx)(J,{}),Object(m.jsx)(F,{})]})})},G=r(23),W=(r(52),function(){return Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Maria Wright, Powered by News API"}),Object(m.jsxs)("ul",{className:"footer__nav",children:[Object(m.jsx)("li",{className:"footer__nav-text-wrapper",children:Object(m.jsxs)("ul",{className:"footer__nav-text-list",children:[Object(m.jsx)("li",{className:"footer__nav-text",children:Object(m.jsx)(i.b,{to:"/",className:"footer__nav-link",children:"Home"})}),Object(m.jsx)("li",{className:"footer__nav-text",children:Object(m.jsx)("a",{href:"https://practicum.yandex.com/web/",target:"_blank",rel:"noreferrer",className:"footer__nav-link",children:"Practicum by Yandex"})})]})}),Object(m.jsx)("li",{className:"footer__nav-icon-wrapper",children:Object(m.jsxs)("ul",{className:"footer__nav-icon-list",children:[Object(m.jsx)("li",{className:"footer__nav-icon",children:Object(m.jsx)("a",{href:"https://github.com/mariawright05",rel:"noreferrer",target:"_blank",className:"footer__nav-link",children:Object(m.jsx)(G.a,{})})}),Object(m.jsx)("li",{className:"footer__nav-icon",children:Object(m.jsx)("a",{href:"https://www.linkedin.com/in/mariawright05/",rel:"noreferrer",target:"_blank",className:"footer__nav-link",children:Object(m.jsx)(G.b,{})})})]})})]})]})}),z=r(3),B=r.n(z),Q=r(7),Y=r(59),K=r(16),X=(r(55),function(e){var t,r=e.card,a=r._id,s=r.url,c=r.urlToImage,o=r.publishedAt,i=r.title,l=r.description,p=r.source,j=r.keyword,b=Object(n.useContext)(v),h=Object(n.useContext)(L),O=Object(n.useContext)(d),f=h.handleUpdateSave,_=O.isAuth,g=O.handleRegisterOpen,x=localStorage.getItem("jwt"),y=Object(n.useState)(!1),w=Object(u.a)(y,2),N=w[0],S=w[1],k="".concat("saved-news"===b?"card__icon_trash":a?"card__icon_save_true":"card__icon_save");"saved-news"===b?t="Remove from saved":_||(t="Sign in to save articles");var P;return Object(m.jsxs)("li",{className:"card",children:[Object(m.jsx)("img",{className:"card__image",src:c,alt:i}),Object(m.jsx)("button",{type:"button",className:k,onClick:"saved-news"===b?function(){f(r,x)}:function(){_?f(r,x):g()},onMouseEnter:function(){void 0!==t&&S(!0)},onMouseLeave:function(){S(!1)},"aria-label":"card action"}),N&&Object(m.jsx)("div",{className:"card__hover-wrapper",children:Object(m.jsx)("p",{className:"card__hover-text",children:t})}),"saved-news"===b&&Object(m.jsx)("div",{className:"card__keyword-wrapper",children:Object(m.jsx)("p",{className:"card__keyword-text",children:j})}),Object(m.jsxs)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"card__text-wrapper",children:[Object(m.jsx)("p",{className:"card__pubDate",children:(P=o,new Date(P).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}))}),Object(m.jsx)("h3",{className:"card__title",children:i}),Object(m.jsx)("p",{className:"card__description",children:l}),Object(m.jsx)("p",{className:"card__source",children:"saved-news"===b?p:p.name})]})]})}),Z="SEARCHED_NEWS",$="SET_SAVED",ee="SET_LOADING",te="SEARCH_ERROR",re="NOT_FOUND",ae="SET_QUERY",ne="SET_NOT_SAVED",se="REGISTER_FAIL",ce="USER_LOADED",oe="AUTH_ERROR",ie="LOGIN_SUCCESS",le="LOGIN_FAIL",ue="LOGOUT",de="CLEAR_ERRORS",pe="SAVED_CARDS",je="CLEAR_NEWS",be=r(8),he=function(e,t){switch(t.type){case Z:return localStorage.setItem("searchedNews",JSON.stringify(t.payload)),Object(j.a)(Object(j.a)({},e),{},{cards:t.payload,visibleList:Object(K.slice)(t.payload,0,be.d),loading:!1});case ee:return Object(j.a)(Object(j.a)({},e),{},{loading:!0,searchError:!1,notFound:!1});case te:return Object(j.a)(Object(j.a)({},e),{},{searchError:!0});case re:return Object(j.a)(Object(j.a)({},e),{},{notFound:!0});case $:return Object(j.a)(Object(j.a)({},e),{},{cards:e.cards.map((function(e){return e.url===t.payload.url&&(e._id=t.payload._id),e}))});case ne:return Object(j.a)(Object(j.a)({},e),{},{cards:e.cards.map((function(e){return e.url===t.payload&&(e._id=null),e})),savedCards:e.savedCards.filter((function(e){return e._id!==t.payload._id}))});case ae:return localStorage.setItem("searchTerm",t.payload),Object(j.a)(Object(j.a)({},e),{},{query:t.payload.charAt(0).toUpperCase()+t.payload.slice(1)});case pe:return Object(j.a)(Object(j.a)({},e),{},{savedCards:t.payload.map((function(e){if(e){var t={};t._id=e._id,t.url=e.url,t.title=e.title,t.description=e.text,t.publishedAt=e.date,t.source=e.source,t.urlToImage=e.image,t.keyword=e.keyword,e=t}return e}))});case je:return Object(j.a)(Object(j.a)({},e),{},{cards:[]});default:return e}},me=function(){var e=Object(Q.a)(B.a.mark((function e(t){var r,a,n,s,c,o;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Date,a=new Date(Date.now()-6048e5),n=r.toISOString(),s=a.toISOString(),e.next=6,fetch("".concat(be.e,"?q=").concat(t,"&apiKey=").concat(be.a,"&from=").concat(s,"&to=").concat(n,"&pageSize=",100,"&sortBy=publishedAt&language=en"));case 6:return c=e.sent,e.next=9,c.ok?c.json():c.json().then((function(e){throw new Error(e)}));case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(Q.a)(B.a.mark((function e(t,r,a,n){var s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(be.c,"/articles/").concat(r),{method:t,headers:{"Content-Type":"application/json","x-auth-token":"".concat(n)},body:a});case 2:return s=e.sent,e.abrupt("return",s.ok?s.json():s.json().then((function(e){throw new Error(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t,r,a,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(Q.a)(B.a.mark((function e(t){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(be.c,"/articles"),{method:"GET",headers:{"Content-Type":"application/json","x-auth-token":"".concat(t)}});case 2:return r=e.sent,e.abrupt("return",r.ok?r.json():r.json().then((function(e){throw new Error(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(e){var t=Object(n.useReducer)(he,{cards:[],card:{},loading:!1,visibleList:[],searchError:!1,notFound:!1,savedCards:[],query:""}),r=Object(u.a)(t,2),a=r[0],s=r[1],c=Object(n.useContext)(d).isAuth,o=function(){s({type:ee})},i=Object(n.useState)(!0),l=Object(u.a)(i,2),p=l[0],j=l[1],b=Object(n.useState)([]),h=Object(u.a)(b,2),O=h[0],f=h[1],_=Object(n.useState)(be.d),g=Object(u.a)(_,2),v=g[0],x=g[1],y=function(){var e=v+be.d,t=e<Math.min(be.b-1,a.cards.length),r=Object(K.concat)(O,Object(K.slice)(a.cards,v,e));x(e),f(r),j(t)};Object(n.useEffect)((function(){f(a.visibleList)}),[a.visibleList]),Object(n.useEffect)((function(){0!==a.cards.length&&y()}),[]);var w=Object(m.jsxs)(m.Fragment,{children:[0!==a.cards.length&&Object(m.jsx)("h2",{className:"cardList__title",children:"Search results"}),Object(m.jsx)("ul",{className:"cardList__card-wrapper",children:O.map((function(e){return Object(m.jsx)(X,{card:e},Object(Y.a)())}))}),p&&Object(m.jsx)("button",{type:"submit",className:"cardList__button",onClick:y,children:"Show more"})]}),N=function(){var e=Object(Q.a)(B.a.mark((function e(t){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(),e.prev=1,e.next=4,me(t);case 4:if(r=e.sent,a.cards=[],s({type:Z,payload:r.articles}),0===r.articles.length){e.next=11;break}return e.abrupt("return",w);case 11:return s({type:re}),e.abrupt("return",[]);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),s({type:te,payload:e.t0.toString()});case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),S=Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("ul",{className:"cardList__card-wrapper",children:a.savedCards.map((function(e){return Object(m.jsx)(X,{card:e},Object(Y.a)())}))})}),k=function(){var e=Object(Q.a)(B.a.mark((function e(t){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe(t);case 3:if(r=e.sent,s({type:pe,payload:r}),0===r.length){e.next=7;break}return e.abrupt("return",S);case 7:return e.abrupt("return",null);case 10:e.prev=10,e.t0=e.catch(0),s({type:te,payload:e.t0.toString()});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),P=function(e){s({type:ae,payload:e})},E=function(){var e=Object(Q.a)(B.a.mark((function e(t,r){var n,c,o,i;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id?"DELETE":"POST",c=t._id||"",o=JSON.stringify({keyword:a.query||"",title:t.title,text:t.description,date:t.publishedAt,source:t.source.name,url:t.url,image:t.urlToImage}),e.prev=3,e.next=6,Oe(n,c,o,r);case 6:i=e.sent,"POST"===n?(s({type:$,payload:i}),localStorage.setItem("searchedNews",JSON.stringify(a.cards))):(s({type:ne,payload:t.url}),localStorage.setItem("searchedNews",JSON.stringify(a.cards)),k(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),s({type:te,payload:e.t0.toString()});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,r){return e.apply(this,arguments)}}(),C=JSON.parse(localStorage.getItem("searchedNews")),I=localStorage.getItem("searchTerm");return Object(n.useEffect)((function(){C&&c?(o(),s({type:Z,payload:C}),P(I)):s({type:je})}),[c]),Object(n.useEffect)((function(){return function(){console.log("cleaned up")}}),[]),Object(m.jsx)(L.Provider,{value:{cards:a.cards,loading:a.loading,visibleList:a.visibleList,searchError:a.searchError,notFound:a.notFound,keyword:a.keyword,savedCards:a.savedCards,query:a.query,searchedList:w,savedList:S,setLoading:o,handleUpdateSave:E,handleSearchNews:N,setQuery:P,handleSavedCards:k},children:e.children})},ge=function(e,t){switch(t.type){case ce:return Object(j.a)(Object(j.a)({},e),{},{user:t.payload.res,isAuth:!0,token:t.payload.token});case ie:return localStorage.setItem("jwt",t.payload.token),Object(j.a)(Object(j.a)(Object(j.a)({},e),t.payload),{},{token:t.payload.token});case oe:case le:case se:return Object(j.a)(Object(j.a)({},e),{},{token:null,user:{},isAuth:!1,errorMsg:t.payload});case de:return Object(j.a)(Object(j.a)({},e),{},{errorMsg:null});case ue:return localStorage.removeItem("jwt"),localStorage.removeItem("searchTerm"),localStorage.removeItem("searchedNews"),Object(j.a)(Object(j.a)({},e),{},{token:null,user:{},isAuth:!1});default:return e}},ve=function(){var e=Object(Q.a)(B.a.mark((function e(t){var r,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(be.c,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","x-auth-token":"".concat(t)}});case 2:return r=e.sent,e.next=5,r.ok?r.json():r.json().then((function(e){return PromiseRejectionEvent.reject(e)}));case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(Q.a)(B.a.mark((function e(t){var r,a,n,s;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,a=t.password,e.next=3,fetch("".concat(be.c,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:r,password:a})});case 3:return n=e.sent,e.next=6,n.ok?n.json():n.json().then((function(e){throw new Error(e)}));case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(Q.a)(B.a.mark((function e(t){var r,a,n,s,c;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,a=t.email,n=t.password,e.next=3,fetch("".concat(be.c,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:r,email:a,password:n})});case 3:return s=e.sent,e.next=6,s.ok?s.json():s.json().then((function(e){throw new Error(e)}));case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(e){var t=Object(n.useReducer)(ge,{token:null,isAuth:!1,errorMsg:null,user:{}}),r=Object(u.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)(!1),o=Object(u.a)(c,2),i=o[0],l=o[1],p=Object(n.useState)(!1),j=Object(u.a)(p,2),b=j[0],h=j[1],O=Object(n.useState)(!1),f=Object(u.a)(O,2),_=f[0],g=f[1],v=function(){l(!1),h(!1),g(!1),s({type:de})},x=function(){g(!0)},y=function(){var e=Object(Q.a)(B.a.mark((function e(){var t,r,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("jwt"),e.prev=1,e.next=4,ve(t);case 4:r=e.sent,n=localStorage.getItem("jwt"),s({type:ce,payload:{res:r,token:n}}),a.token=t,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),s({type:oe,payload:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(Q.a)(B.a.mark((function e(t){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xe(t);case 3:return(null===(r=e.sent)||void 0===r?void 0:r.token)?s({type:ie,payload:r}):s({type:le,payload:r}),v(),e.next=8,y();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),s({type:le,payload:e.t0.toString()});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(Q.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye(t);case 3:v(),x(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({type:se,payload:e.t0.toString()});case 10:ye(t).then((function(){v(),x()})).catch((function(e){return s({type:se,payload:e.toString()})}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(d.Provider,{value:{token:a.token,isAuth:a.isAuth,errorMsg:a.errorMsg,user:a.user,handleLoadUser:y,handleLogin:w,handleRegister:N,handleLogout:function(){return s({type:ue})},handleSuccessOpen:x,handleRegisterOpen:function(){h(!0)},handleLoginOpen:function(){l(!0)},handleClearErrors:function(){return s({type:de})},isLoginOpen:i,isRegisterOpen:b,isSuccessOpen:_,closeAllPopups:v},children:e.children})},Ne=function(e){var t=e.component,r=Object(n.useContext)(d).handleLoginOpen,a=localStorage.getItem("jwt");return Object(n.useEffect)((function(){a||r()}),[]),Object(m.jsx)(l.b,{children:function(){return a?Object(m.jsx)(t,{}):Object(m.jsx)(l.a,{to:"/"})}})};r(56);var Se=function(){return Object(m.jsx)("div",{className:"app",children:Object(m.jsx)(we,{children:Object(m.jsx)(_e,{children:Object(m.jsx)(i.a,{children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{exact:!0,path:"/",children:Object(m.jsx)(U,{})}),Object(m.jsx)(Ne,{exact:!0,path:"/saved-news",component:V}),Object(m.jsx)(l.a,{to:"/"})]}),Object(m.jsx)(W,{})]})})})})})};o.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(Se,{})}),document.getElementById("root"))}],[[57,1,2]]]);
//# sourceMappingURL=main.e4686394.chunk.js.map